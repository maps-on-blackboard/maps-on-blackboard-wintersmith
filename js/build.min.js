!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require){function zoomTo(){var mercCenter,mapExtent,res,tiles,center=document.getElementById("center").value.split(","),zoom=parseInt(document.getElementById("zoom").value);mercCenter=merc.forward([parseFloat(center[0]),parseFloat(center[1])]),res=mercatorMaxRes/Math.pow(2,zoom),mapExtent={left:mercCenter[0]-size.width/2*res,right:mercCenter[0]+size.width/2*res,bottom:mercCenter[1]-size.height/2*res,top:mercCenter[1]+size.height/2*res},tiles=webMercatorTiles(mapExtent,zoom),mapDiv.innerHTML="",tiles.forEach(function(t){var img=document.createElement("img");img.src=baseURL+"/"+t.Z+"/"+t.X+"/"+t.Y+".png",img.setAttribute("style","left:"+t.left+"px;top:"+t.top+"px;"),img.setAttribute("class","tile"),mapDiv.appendChild(img)})}var mapDiv,size,webMercatorTiles=require("web-mercator-tiles"),SphericalMercator=require("sphericalmercator"),baseURL="http://tile.openstreetmap.org",mercatorMaxRes=156543.03392804097;mapDiv=document.getElementById("map"),size={height:parseInt(mapDiv.clientHeight),width:parseInt(mapDiv.clientWidth)},merc=new SphericalMercator({size:256}),document.getElementById("zoomTo").addEventListener("click",zoomTo),zoomTo()},{sphericalmercator:2,"web-mercator-tiles":3}],2:[function(require,module,exports){var SphericalMercator=function(){function SphericalMercator(options){if(options=options||{},this.size=options.size||256,!cache[this.size]){var size=this.size,c=cache[this.size]={};c.Bc=[],c.Cc=[],c.zc=[],c.Ac=[];for(var d=0;30>d;d++)c.Bc.push(size/360),c.Cc.push(size/(2*Math.PI)),c.zc.push(size/2),c.Ac.push(size),size*=2}this.Bc=cache[this.size].Bc,this.Cc=cache[this.size].Cc,this.zc=cache[this.size].zc,this.Ac=cache[this.size].Ac}var cache={},D2R=Math.PI/180,R2D=180/Math.PI,A=6378137,MAXEXTENT=20037508.342789244;return SphericalMercator.prototype.px=function(ll,zoom){var d=this.zc[zoom],f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999),x=Math.round(d+ll[0]*this.Bc[zoom]),y=Math.round(d+.5*Math.log((1+f)/(1-f))*-this.Cc[zoom]);return x>this.Ac[zoom]&&(x=this.Ac[zoom]),y>this.Ac[zoom]&&(y=this.Ac[zoom]),[x,y]},SphericalMercator.prototype.ll=function(px,zoom){var g=(px[1]-this.zc[zoom])/-this.Cc[zoom],lon=(px[0]-this.zc[zoom])/this.Bc[zoom],lat=R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI);return[lon,lat]},SphericalMercator.prototype.bbox=function(x,y,zoom,tms_style,srs){tms_style&&(y=Math.pow(2,zoom)-1-y);var ll=[x*this.size,(+y+1)*this.size],ur=[(+x+1)*this.size,y*this.size],bbox=this.ll(ll,zoom).concat(this.ll(ur,zoom));return"900913"===srs?this.convert(bbox,"900913"):bbox},SphericalMercator.prototype.xyz=function(bbox,zoom,tms_style,srs){"900913"===srs&&(bbox=this.convert(bbox,"WGS84"));var ll=[bbox[0],bbox[1]],ur=[bbox[2],bbox[3]],px_ll=this.px(ll,zoom),px_ur=this.px(ur,zoom),bounds={minX:Math.floor(px_ll[0]/this.size),minY:Math.floor(px_ur[1]/this.size),maxX:Math.floor((px_ur[0]-1)/this.size),maxY:Math.floor((px_ll[1]-1)/this.size)};if(tms_style){var tms={minY:Math.pow(2,zoom)-1-bounds.maxY,maxY:Math.pow(2,zoom)-1-bounds.minY};bounds.minY=tms.minY,bounds.maxY=tms.maxY}return bounds},SphericalMercator.prototype.convert=function(bbox,to){return"900913"===to?this.forward(bbox.slice(0,2)).concat(this.forward(bbox.slice(2,4))):this.inverse(bbox.slice(0,2)).concat(this.inverse(bbox.slice(2,4)))},SphericalMercator.prototype.forward=function(ll){var xy=[A*ll[0]*D2R,A*Math.log(Math.tan(.25*Math.PI+.5*ll[1]*D2R))];return xy[0]>MAXEXTENT&&(xy[0]=MAXEXTENT),xy[0]<-MAXEXTENT&&(xy[0]=-MAXEXTENT),xy[1]>MAXEXTENT&&(xy[1]=MAXEXTENT),xy[1]<-MAXEXTENT&&(xy[1]=-MAXEXTENT),xy},SphericalMercator.prototype.inverse=function(xy){return[xy[0]*R2D/A,(.5*Math.PI-2*Math.atan(Math.exp(-xy[1]/A)))*R2D]},SphericalMercator}();"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=exports=SphericalMercator)},{}],3:[function(require,module){module.exports=function(extent,z){for(var projExtent={left:-20037508.342789244,right:20037508.342789244,bottom:-20037508.342789244,top:20037508.342789244},size=256,res=[156543.03392804097,78271.51696402048,39135.75848201024,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.8740565703525,76.43702828517625,38.21851414258813,19.109257071294063,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.29858214173896974,.14929107086948487,.07464553543474244,.03732276771737122,.01866138385868561],lx=Math.floor((extent.left-projExtent.left)/res[z]),rx=Math.floor((extent.right-projExtent.left)/res[z]),by=Math.floor((projExtent.top-extent.bottom)/res[z]),ty=Math.floor((projExtent.top-extent.top)/res[z]),lX=Math.floor(lx/size),rX=Math.floor(rx/size),bY=Math.floor(by/size),tY=Math.floor(ty/size),top=topStart=tY*size-ty,left=lX*size-lx,tiles=[],i=lX;rX>=i;i++){top=topStart;for(var j=tY;bY>=j;j++)tiles.push({X:i,Y:j,Z:z,top:top,left:left}),top+=size;left+=size}return tiles}},{}]},{},[1]);